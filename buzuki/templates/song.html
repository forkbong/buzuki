{% extends "base.html" %}

{% block title %}
{{ song.name }} · {{ super() }}
{%- endblock %}

{% block header %}
{{ song.name }}
{%- endblock %}

{% block content %}
<div class="row">
  <div class="col-lg-7">
    <div class="subtitle">
      <h5>
        <a href="{{ url_for('main.artist', slug=song.artist_slug) }}">{{ song.artist }}</a>
      </h5>
      <span>
        <span>
          {% include 'partials/transpose.html' %}
        </span>
        <span>
          <a href="#"
             id="more-options-menu-button"
             class="dropdown-button ml-1"
             data-toggle="dropdown"
             title="Επιλογές">
            <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="more-options-menu-button">
            {% if admin %}
            <a class="dropdown-item" href="{{ url_for('admin.add') }}">
              <i class="fa fa-file" aria-hidden="true"></i>
              &nbsp;Νέο
            </a>
            <a class="dropdown-item" href="{{ url_for('admin.edit', slug=song.slug) }}">
              <i class="fa fa-pencil" aria-hidden="true"></i>
              &nbsp;Επεξεργασία
            </a>
            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#deleteModal" >
              <i class="fa fa-trash" aria-hidden="true"></i>
              &nbsp;Διαγραφή
            </a>
            {% endif %}
            <a class="dropdown-item"
               {% if semitones or root %}
               href="{{ url_for('admin.save', slug=song.slug, semitones=semitones, root=root) }}"
               {% else %}
               href="#" hidden
               {% endif %}
               id="save-button">
              <i class="fa fa-save" aria-hidden="true"></i>
              &nbsp;Αποθήκευση
            </a>
            <a class="dropdown-item"
               href="{{ url_for('main.songprint', slug=song.slug, semitones=semitones, root=root) }}"
               id="print-button">
              <i class="fa fa-print" aria-hidden="true"></i>
              &nbsp;Εκτύπωση
            </a>
          </div>
        </span>
      </span>
    </div>
    <pre class="mt-2" id="song-info">{{ song.info(html=True)|safe}}</pre>
  </div>
  <div class="col-lg-5">
    {% if song.youtube_id %}
    <div class="embed-responsive embed-responsive-16by9">
      <iframe class="embed-responsive-item"
              src="https://www.youtube.com/embed/{{ song.youtube_id }}"
              title="Video">
      </iframe>
    </div>
    {% endif %}
    {% if songs %}
    <div class="mt-3">
      <h5>{{ related_title }}</h5>
      {% include 'partials/songlist.html' %}
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}

{% block javascript %}
<script>
  transposeInit('/api/songs/{{ song.slug }}', '{{ song.slug }}', '#song-info');
</script>
{% endblock %}
