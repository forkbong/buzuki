{% extends "base.html" %}

{% block title %}
{{ song.name }} Â· {{ super() }}
{%- endblock %}

{% block header %}
<a href="{{ url_for('main.artist', slug=song.artist_slug) }}">{{ song.artist }}</a> - {{ song.name }}
{%- endblock %}

{% block extra_header %}
{% include 'partials/transpose.html' %}
<a href="{{ url_for('main.songprint', slug=song.slug, semitones=semitones, root=root) }}"
   id="print-button"
   title="Print">
  <i class="fa fa-print" aria-hidden="true"></i>
</a>
<a {% if semitones or root %}
   href="{{ url_for('admin.save', slug=song.slug, semitones=semitones, root=root) }}"
   {% else %}
   href="" hidden
   {% endif %}
   id="save-button" title="Save">
  <i class="fa fa-save" aria-hidden="true"></i>
</a>
<a href="{{ url_for('admin.edit', slug=song.slug) }}" title="Edit">
  <i class="fa fa-pencil" aria-hidden="true"></i>
</a>
{% if admin %}
<a href="#" data-toggle="modal" data-target="#deleteModal" title="Delete">
  <i class="fa fa-trash" aria-hidden="true"></i>
</a>
{% endif %}
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-lg-7">
    <pre id="song-info">{{ song.info(html=True)|safe}}</pre>
  </div>
  <div class="col-lg-5">
    {% if song.youtube_id %}
    <div class="embed-responsive embed-responsive-16by9">
      <iframe class="embed-responsive-item"
              src="https://www.youtube.com/embed/{{ song.youtube_id }}"
              title="Video">
      </iframe>
    </div>
    {% endif %}
    {% if songs %}
    <div class="mt-3">
      <h5>{{ related_title }}</h5>
      {% include 'partials/songlist.html' %}
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}

{% block javascript %}
<script src="{{ url_for('static', filename='transpose.js') }}"></script>
<script>
  transposeInit('/api/songs/{{ song.slug }}', '{{ song.slug }}', '#song-info');
</script>
{% endblock %}
